---
hide:
    - toc 
---

# Problem J: ä¸¤ä¸ªç­‰å·®æ•°åˆ—

## ğŸ“ é¢˜ç›®æè¿°

ç»™å®šä¸¤ä¸ªç­‰å·®æ•°åˆ—ï¼Œæ±‚ Lï¼ŒRåŒºé—´å†…ä¸¤æ•°åˆ—äº¤é›†å…ƒç´ çš„æ•°é‡

## ğŸ”‘ ç®—æ³•æ¨¡å—

## ğŸ’¡ æ€è·¯åˆ†æ

1. çº¯æš´åŠ›æšä¸¾ï¼Œä¸ºé™ä½æ—¶é—´å¤æ‚åº¦ï¼Œæšä¸¾å…¬å·®å¤§çš„æ•°åˆ—å…ƒç´ ï¼Œæ£€æŸ¥å…¶æ˜¯å¦å­˜åœ¨äºå¦ä¸€æ•°åˆ—
    
    è®¾ $a_1 > a_2$ ï¼Œåˆ™æ—¶é—´å¤æ‚åº¦ $O(\frac{R - L}{a_1})$ **$R-L â‰¤ 4 \times 10^9$**  **$0 < a_1 â‰¤2 \times 10^9$** 
    
    å‘ç°å½“ $a_1$ è¾ƒå¤§æ—¶ç¨‹åºå¯è¡Œã€åŒºé—´ç³»æ•°ï¼Œæšä¸¾å…ƒç´ å°‘ã€‘
    
    ä»¥ **$10^3$** ä¸ºç•Œï¼Œå½“ **$a_1>10^3$** æ—¶çº¯æš´åŠ›æšä¸¾ï¼Œå½“ **$a_1 \leq 10^3$** æ—¶å¦å¯»ä»–æ³•
    
    æ—¶é—´å¤æ‚åº¦ $O(\frac{R - L}{a_1})$ ï¼Œ$a_1 > 10^3~~ \Rightarrow ~~
    \frac{R - L}{a_1} < 4 \times 10^6$ 
    
2. è§‚å¯Ÿå‘ç°è‹¥ $x$ æ˜¯ä¸¤æ•°åˆ—äº¤é›†å…ƒç´ ï¼Œåˆ™ $x+a_1a_2$ ã€$x+ka_1a_2$ ä¹Ÿæ˜¯äº¤é›†å…ƒç´ 
    
    åœ¨ $L \to L+a_1a_2$ èŒƒå›´å†…æšä¸¾æ‰€æœ‰å…ƒç´ åˆ¤æ–­å…¶æ˜¯å¦ä¸ºäº¤é›†å…ƒç´ 
    
    è®¡ç®—æ¯ä¸ªäº¤é›†å…ƒç´  $x$ çš„ $a_1a_2$ å…¬å·®åç»­ä¸ªæ•° $cnt = \lfloor \frac{R - x}{a_1a_2} \rfloor + 1$
    
    æ—¶é—´å¤æ‚åº¦ $O({a_1a_2})$ ï¼Œ$a_2 \leq a_1 \leq 10^3~~ \Rightarrow ~~
    a_1a_2 \leq 10^6$ 
    
3. ä¸¤éƒ¨åˆ†æ“ä½œæ—¶é—´å¤æ‚åº¦å‡ä¸º $10^6$ çº§åˆ«ï¼Œå¯ä»¥é€šè¿‡

## ç¼–ç æ€è·¯ï¼š

1. è¯»å–æ•°æ®
2. ç”±äº $k' \geq 0 \Rightarrow  a_1k'+b_1 \geq b_1$ ä¸” $l' \geq 0 \Rightarrow a_2l'+b_2 \geq b_2$
    
    æ¨å‡ºåˆæ³•å·¦ç«¯ç‚¹ $L = max(L, ~max(b_1, ~b_2))$
    
3. ä¿è¯ $a_1 \geq a_2$
    
    å½“ $a_1 \leq 10^3$ æ—¶ï¼Œæšä¸¾äº¤é›†å¤´éƒ¨å…ƒç´ è®¡ç®—æ•°é‡
    
    å½“ $a_1 > 10^3$ æ—¶ï¼Œæšä¸¾æ•°åˆ—å…ƒç´ ç»Ÿè®¡æ•°é‡

## ğŸ–¥ï¸ ä»£ç å®ç°

```cpp
#include <iostream>
#include <cstdint>

#define int long long

using namespace std;

int32_t main() {
    int a1, b1, a2, b2, L, R, ans = 0;
    cin >> a1 >> b1 >> a2 >> b2 >> L >> R;
    L = max(L, max(b1, b2));
    if (a1 < a2) swap(a1, a2), swap(b1, b2);

    if (a1 <= 1000) {
        for (int xh = L, XH = min(L + a1 * a2 - 1, R); xh <= XH; xh++) {
            if ((xh - b1) % a1 != 0 || (xh - b2) % a2 != 0) continue;
            ans += (R - xh) / (a1 * a2) + 1;
        }
    } else {
        for (int i = (L - b1 + a1 - 1) / a1, I = (R - b1) / a1; i <= I; i++) {
            int x = a1 * i + b1;
            if (x < L || x > R) continue;
            ans += !((x - b2) % a2);
        }
    }

    cout << ans << endl;

    return 0;
}
```

## â±ï¸ å¤æ‚åº¦åˆ†æ

$O(10^6)$

## ğŸ“š æ‹“å±•

